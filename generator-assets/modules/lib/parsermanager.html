<!DOCTYPE html>
<html lang="en">
  <head>
    <title></title>
    <link rel="stylesheet" href="../../assets/css/bootstrap.css">
    <link rel="stylesheet" href="../../assets/css/typeahead.js-bootstrap.css">
    <link rel="stylesheet" href="../../assets/css/font-awesome.css">
    <link rel="stylesheet" href="../../assets/css/prism.css">
    <link rel="stylesheet" href="../../assets/css/main.css">
    <!--[if IE 7]>
    <link rel="stylesheet" href="../assets/css/font-awesome-ie7.css">
    <![endif]-->
    <script type="text/javascript" src="../../assets/js/jquery-1.9.1.js"></script>
    <script type="text/javascript" src="../../assets/js/bootstrap.js"></script>
    <script type="text/javascript" src="../../assets/js/typeahead.js"></script>
    <script type="text/javascript" src="../../assets/js/main.js"></script>
    
    <script>
      window.moduleLevel = "../..";
    </script>
  </head>
  <body>
    <div class="row-fluid">
      <div class="navbar navbar-inverse navbar-fixed-top">
        <div class="navbar-inner">
          <div class="container">
            <a class="brand" href="../../index.html"> API</a>
            <div class="nav-collapse collapse">
              <ul class="nav">
                <li><a href="#dependencies">Dependencies</a></li>
                <li><a href="#variables">Variables</a></li>
                <li><a href="#functions">Functions</a></li>
                <li><a href="#classes">Classes</a></li>
              </ul>
            </div>
            <input class="typeahead" placeholder="Search..." type="text" >
          </div>
        </div>
      </div>
    </div>
    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span12">
          <div class="page-header">
            <h1>parsermanager</h1>
          </div>
        </div>
      </div>
      <div class="row-fluid">
        <div class="span3">
          <div class="left-section">
            <ul class="nav nav-list">
              <li class="nav-header">
                <a href="#" id="toggle-other-modules"><i class="icon-folder-close"></i> Modules (16)</a>
              </li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_lib"><i class="icon-folder-open"></i>lib</a>
              </li>
            </ul>
            <ul id="package_lib" class="nav nav-list">
              <li><a href="../../modules/lib/assetmanager.html">assetmanager</a></li>
              <li><a href="../../modules/lib/asyncqueue.html">asyncqueue</a></li>
              <li><a href="../../modules/lib/componentmanager.html">componentmanager</a></li>
              <li><a href="../../modules/lib/errormanager.html">errormanager</a></li>
              <li><a href="../../modules/lib/filemanager.html">filemanager</a></li>
              <li><a href="../../modules/lib/headlights.html">headlights</a></li>
              <li><a href="../../modules/lib/parsermanager.html">parsermanager</a></li>
              <li><a href="../../modules/lib/renderer.html">renderer</a></li>
              <li><a href="../../modules/lib/rendermanager.html">rendermanager</a></li>
              <li><a href="../../modules/lib/statemanager.html">statemanager</a></li>
            </ul>
                        <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_lib_dom"><i class="icon-folder-open"></i>lib.dom</a>
              </li>
            </ul>
            <ul id="package_lib_dom" class="nav nav-list">
              <li><a href="../../modules/lib/dom/bounds.html">bounds</a></li>
              <li><a href="../../modules/lib/dom/layer.html">layer</a></li>
              <li><a href="../../modules/lib/dom/layereffects.html">layereffects</a></li>
              <li><a href="../../modules/lib/dom/mask.html">mask</a></li>
              <li><a href="../../modules/lib/dom/path.html">path</a></li>
            </ul>
                        <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_"><i class="icon-folder-open"></i></a>
              </li>
            </ul>
            <ul id="package_" class="nav nav-list">
              <li><a href="../../modules/main.html">main</a></li>
            </ul>
            
          </div>
        </div>
        <div class="module span9">
          <section class="description">
            <h3>Description</h3>
            <div>
              
            </div>
          </section>
    
          <section class="dependencies">
            <h3>Dependencies</h3>
            
            <ul class="nav nav-list">
              <li><a href="..&#x2F;../modules/./parser.html">parser</a></li>
            </ul>
            
            
          </section>
    
    
          
          <section class="classes">
            <h2>Classes</h2>
            
              <div class="well">
                <div class="member public">
                  <span class="pull-right scope">
                    Constructor
                  </span>
                  <h4>ParserManager</h4>
                  <em><p>The ParserManager manages parsing, normalization and analysis of layer
names into asset specifications. The config parameter can be used to enable
svg and webp parsing if the &quot;svg-enabled&quot; and &quot;webp-enabled&quot; parameters are
set, resp.</p>
</em>
                  <dl>
                    <dt>config</dt>
                    <dd class="label label-info pull-left">object</dd>
                    <dd></dd>
                  </dl>
                  
                  <button class="btn btn-small show-code">Show code</button>
                  <pre class="language-javascript"><code class="language-javascript">    function ParserManager(config) {
        this._config = config || {};

        this._supportedUnits = {
            &quot;in&quot;: true,
            &quot;cm&quot;: true,
            &quot;px&quot;: true,
            &quot;mm&quot;: true
        };

        this._supportedExtensions = {
            &quot;jpg&quot;: true,
            &quot;png&quot;: true,
            &quot;gif&quot;: true,
            &quot;svg&quot;: this._config.hasOwnProperty(&quot;svg-enabled&quot;) ? !!this._config[&quot;svg-enabled&quot;] : true,
            &quot;webp&quot;: !!this._config[&quot;webp-enabled&quot;]
        };
    }</code></pre>
                </div>
      
                <section class="properties ">
                  <h3>Properties 
                    <label class="checkbox">
                      <input class="toggle-public" type="checkbox"> Show Private Members
                    </label>
                  </h3>
                  
                  <div class="member private">
                    <span class="pull-right scope">
                      Private
                      
                    </span>
                    <h4>_supportedExtensions</h4>
                    <dl>
                      <dt>Type</dt>
                      <dd>{string: boolean}</dd>
                      <dt>Private</dt>
                    </dl>
                    <div class="description"><p>Set of supported units of file extensions.</p>
</div>
                    <button class="btn btn-small show-code">Show code</button>
                    <pre class="language-javascript"><code class="language-javascript">    ParserManager.prototype._supportedExtensions = null;</code></pre>
                  </div>
                  <div class="member private">
                    <span class="pull-right scope">
                      Private
                      
                    </span>
                    <h4>_supportedUnits</h4>
                    <dl>
                      <dt>Type</dt>
                      <dd>{string: boolean}</dd>
                      <dt>Private</dt>
                    </dl>
                    <div class="description"><p>Set of supported units of measurement.</p>
</div>
                    <button class="btn btn-small show-code">Show code</button>
                    <pre class="language-javascript"><code class="language-javascript">    ParserManager.prototype._supportedUnits = null;</code></pre>
                  </div>
                  
                </section>
      
                <section class="methods">
                  <h3>Methods 
                    <label class="checkbox">
                      <input class="toggle-public" type="checkbox"> Show Private Members
                    </label>
                  </h3>
                  
                  <div class="member private">
                    <span class="pull-right scope">
                      Private
                      
                    </span>
                    <h4>_analyzeComponent</h4>
                    <div class="description"><p>Analyze the component, returning a list of errors.</p>
</div>
                    <dl>
                      <dt>component</dt>
                      <dd class="label label-info pull-left">Component</dd>
                      <dd></dd>
                    </dl>
                    <dl>
                      <dt>Returns: </dt>
                      <dd class="label label-info pull-left">Array.&lt;string&gt;</dd>
                      <dd>The possibly empty list of analysis errors.</dd>
                    </dl>
                    <button class="btn btn-small show-code">Show code</button>
                    <pre class="language-javascript"><code class="language-javascript">    ParserManager.prototype._analyzeComponent = function (component) {
        var errors = [];

        if (component.scale === 0) {
            errors.push(&quot;Invalid scale: 0%&quot;);
        }

        if (component.width === 0) {
            errors.push(&quot;Invalid width: 0&quot;);
        }

        if (component.height === 0) {
            errors.push(&quot;Invalid height: 0&quot;);
        }

        if (component.widthUnit &amp;&amp; !this._supportedUnits[component.widthUnit]) {
            errors.push(&quot;Invalid width unit: &quot; + component.widthUnit);
        }
        
        if (component.heightUnit &amp;&amp; !this._supportedUnits[component.heightUnit]) {
            errors.push(&quot;Invalid height unit: &quot; + component.heightUnit);
        }

        if (component.extension &amp;&amp; !this._supportedExtensions[component.extension]) {
            errors.push(&quot;Unsupported extension: &quot; + component.extension);
        }

        if (component.hasOwnProperty(&quot;quality&quot;)) {
            var quality = component.quality,
                invalidQuality = false;

            switch (component.extension) {
            case &quot;jpg&quot;:
            case &quot;webp&quot;:
                if (quality &lt; 1 || quality &gt; 100) {
                    invalidQuality = true;
                }
                break;
            case &quot;png&quot;:
                if (!(quality === 8 || quality === 24 || quality === 32)) {
                    invalidQuality = true;
                }
                break;
            default:
                invalidQuality = true;
            }

            if (invalidQuality) {
                errors.push(&quot;Invalid quality: &quot; + quality);
            }
        }

        return errors;
    };</code></pre>
                  </div>
                  <div class="member private">
                    <span class="pull-right scope">
                      Private
                      
                    </span>
                    <h4>_normalizeComponent</h4>
                    <div class="description"><p>Normalize the properties of the given component. Updates the object in place.</p>
</div>
                    <dl>
                      <dt>component</dt>
                      <dd class="label label-info pull-left">Component</dd>
                      <dd></dd>
                    </dl>
                    <dl>
                    </dl>
                    <button class="btn btn-small show-code">Show code</button>
                    <pre class="language-javascript"><code class="language-javascript">    ParserManager.prototype._normalizeComponent = function (component) {
        if (component.hasOwnProperty(&quot;extension&quot;)) {
            var extension = component.extension.toLowerCase();

            if (extension === &quot;jpeg&quot;) {
                extension = &quot;jpg&quot;;
            }

            component.extension = extension;

            if (component.hasOwnProperty(&quot;quality&quot;)) {
                var quality = component.quality;
                if (quality[quality.length - 1] === &quot;%&quot;) {
                    quality = parseInt(quality.substring(0, quality.length - 1), 10);
                } else if (extension === &quot;png&quot; &amp;&amp; quality[quality.length - 1] === &quot;a&quot;) {
                    &#x2F;&#x2F; normalize png24a -&gt; png32
                    quality = parseInt(quality.substring(0, quality.length - 1), 10);
                    quality += 8;
                } else {
                    quality = parseInt(quality, 10);

                    if (extension !== &quot;png&quot;) {
                        quality *= 10;
                    }
                }

                component.quality = quality;
            }
        }

        if (component.hasOwnProperty(&quot;widthUnit&quot;)) {
            component.widthUnit = component.widthUnit.toLowerCase();
        }

        if (component.hasOwnProperty(&quot;heightUnit&quot;)) {
            component.heightUnit = component.heightUnit.toLowerCase();
        }
    };</code></pre>
                  </div>
                  <div class="member private">
                    <span class="pull-right scope">
                      Private
                      
                    </span>
                    <h4>_parseLayerName</h4>
                    <div class="description"><p>Parse a layer name into a non-empty array of file specification parts.
If a given layer specification part can be parsed into a file specification,
then the resulting object has at least &quot;file&quot; and &quot;extension&quot; properties,
and possibly also &quot;quality&quot;, &quot;width&quot;, &quot;height&quot;, &quot;widthUnit&quot; and &quot;heightUnit&quot;
properties as well. Otherwise, if a given layer name part (or the entire
layer name) can&#39;t be parsed into a file specification, then the resulting
object just has a single &quot;name&quot; property, which is the same as the input
string.</p>
</div>
                    <dl>
                      <dt>layerName</dt>
                      <dd class="label label-info pull-left">string</dd>
                      <dd></dd>
                    </dl>
                    <dl>
                    </dl>
                    <button class="btn btn-small show-code">Show code</button>
                    <pre class="language-javascript"><code class="language-javascript">    ParserManager.prototype._parseLayerName = function (layerName) {
        return parse(layerName);
    };</code></pre>
                  </div>
                  <div class="member">
                    <span class="pull-right scope">
                      
                      
                    </span>
                    <h4>analyzeLayerName</h4>
                    <div class="description"><p>Parse a layer name, returning a list of objects that contain a parsed
component and a list of errors encountered while analyzing that component.
The component denotes a valid asset iff there are no analysis errors and
the component contains either a &quot;file&quot; property (if it is a &quot;basic&quot;
component that describes a single asset) or a &quot;default&quot; property (if it
is default component that is used to derive non-basic components.)</p>
</div>
                    <dl>
                      <dt>layerName</dt>
                      <dd class="label label-info pull-left">string</dd>
                      <dd></dd>
                    </dl>
                    <dl>
                      <dt>Returns: </dt>
                      <dd class="label label-info pull-left">Array.&lt;{component: Component,errors: Array.&lt;string&gt;}&gt;</dd>
                      <dd></dd>
                    </dl>
                    <button class="btn btn-small show-code">Show code</button>
                    <pre class="language-javascript"><code class="language-javascript">    ParserManager.prototype.analyzeLayerName = function (layerName) {
        var components;

        try {
            components = this._parseLayerName(layerName);
        } catch (parseError) {
            return [{
                component: { name: layerName },
                errors: [parseError.message]
            }];
        }

        return components.map(function (component) {
            this._normalizeComponent(component);

            return {
                component: component,
                errors: this._analyzeComponent(component)
            };
        }, this);
    };

    module.exports = ParserManager;
}());</code></pre>
                  </div>
                </section>
                
              </div>
            
          </section>
          
        </div>
      </div>
    </div>

    <script type="text/javascript" src="../../assets/js/prism.js"></script>
  </body>
</html>