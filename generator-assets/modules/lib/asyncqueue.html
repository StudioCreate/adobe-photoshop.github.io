<!DOCTYPE html>
<html lang="en">
  <head>
    <title></title>
    <link rel="stylesheet" href="../../assets/css/bootstrap.css">
    <link rel="stylesheet" href="../../assets/css/typeahead.js-bootstrap.css">
    <link rel="stylesheet" href="../../assets/css/font-awesome.css">
    <link rel="stylesheet" href="../../assets/css/prism.css">
    <link rel="stylesheet" href="../../assets/css/main.css">
    <!--[if IE 7]>
    <link rel="stylesheet" href="../assets/css/font-awesome-ie7.css">
    <![endif]-->
    <script type="text/javascript" src="../../assets/js/jquery-1.9.1.js"></script>
    <script type="text/javascript" src="../../assets/js/bootstrap.js"></script>
    <script type="text/javascript" src="../../assets/js/typeahead.js"></script>
    <script type="text/javascript" src="../../assets/js/main.js"></script>
    
    <script>
      window.moduleLevel = "../..";
    </script>
  </head>
  <body>
    <div class="row-fluid">
      <div class="navbar navbar-inverse navbar-fixed-top">
        <div class="navbar-inner">
          <div class="container">
            <a class="brand" href="../../index.html"> API</a>
            <div class="nav-collapse collapse">
              <ul class="nav">
                <li><a href="#dependencies">Dependencies</a></li>
                <li><a href="#variables">Variables</a></li>
                <li><a href="#functions">Functions</a></li>
                <li><a href="#classes">Classes</a></li>
              </ul>
            </div>
            <input class="typeahead" placeholder="Search..." type="text" >
          </div>
        </div>
      </div>
    </div>
    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span12">
          <div class="page-header">
            <h1>asyncqueue</h1>
          </div>
        </div>
      </div>
      <div class="row-fluid">
        <div class="span3">
          <div class="left-section">
            <ul class="nav nav-list">
              <li class="nav-header">
                <a href="#" id="toggle-other-modules"><i class="icon-folder-close"></i> Modules (16)</a>
              </li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_lib"><i class="icon-folder-open"></i>lib</a>
              </li>
            </ul>
            <ul id="package_lib" class="nav nav-list">
              <li><a href="../../modules/lib/assetmanager.html">assetmanager</a></li>
              <li><a href="../../modules/lib/asyncqueue.html">asyncqueue</a></li>
              <li><a href="../../modules/lib/componentmanager.html">componentmanager</a></li>
              <li><a href="../../modules/lib/errormanager.html">errormanager</a></li>
              <li><a href="../../modules/lib/filemanager.html">filemanager</a></li>
              <li><a href="../../modules/lib/headlights.html">headlights</a></li>
              <li><a href="../../modules/lib/parsermanager.html">parsermanager</a></li>
              <li><a href="../../modules/lib/renderer.html">renderer</a></li>
              <li><a href="../../modules/lib/rendermanager.html">rendermanager</a></li>
              <li><a href="../../modules/lib/statemanager.html">statemanager</a></li>
            </ul>
                        <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_lib_dom"><i class="icon-folder-open"></i>lib.dom</a>
              </li>
            </ul>
            <ul id="package_lib_dom" class="nav nav-list">
              <li><a href="../../modules/lib/dom/bounds.html">bounds</a></li>
              <li><a href="../../modules/lib/dom/layer.html">layer</a></li>
              <li><a href="../../modules/lib/dom/layereffects.html">layereffects</a></li>
              <li><a href="../../modules/lib/dom/mask.html">mask</a></li>
              <li><a href="../../modules/lib/dom/path.html">path</a></li>
            </ul>
                        <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_"><i class="icon-folder-open"></i></a>
              </li>
            </ul>
            <ul id="package_" class="nav nav-list">
              <li><a href="../../modules/main.html">main</a></li>
            </ul>
            
          </div>
        </div>
        <div class="module span9">
          <section class="description">
            <h3>Description</h3>
            <div>
              
            </div>
          </section>
    
          <section class="dependencies">
            <h3>Dependencies</h3>
            
            <ul class="nav nav-list">
              <li><a href="..&#x2F;../modules/events.html">events</a></li>
              <li><a href="..&#x2F;../modules/q.html">q</a></li>
              <li><a href="..&#x2F;../modules/util.html">util</a></li>
            </ul>
            
            
          </section>
    
    
          
          <section class="classes">
            <h2>Classes</h2>
            
              <div class="well">
                <div class="member public">
                  <span class="pull-right scope">
                    Constructor
                  </span>
                  <h4>AsyncQueue</h4>
                  <em><p>A pausable queue of asynchronous operations to be executed in sequence.</p>
</em>
                  <dl>
                  </dl>
                  
                  <button class="btn btn-small show-code">Show code</button>
                  <pre class="language-javascript"><code class="language-javascript">    function AsyncQueue() {
        events.EventEmitter.call(this);
        this._pending = [];
    }

    util.inherits(AsyncQueue, events.EventEmitter);</code></pre>
                </div>
      
                <section class="properties ">
                  <h3>Properties 
                    <label class="checkbox">
                      <input class="toggle-public" type="checkbox"> Show Private Members
                    </label>
                  </h3>
                  
                  <div class="member private">
                    <span class="pull-right scope">
                      Private
                      
                    </span>
                    <h4>_current</h4>
                    <dl>
                      <dt>Type</dt>
                      <dd>?Promise</dd>
                      <dt>Private</dt>
                    </dl>
                    <div class="description"><p>The promise for the current executing operation, or null if the queue is
quiescent.</p>
</div>
                    <button class="btn btn-small show-code">Show code</button>
                    <pre class="language-javascript"><code class="language-javascript">    AsyncQueue.prototype._current = null;</code></pre>
                  </div>
                  <div class="member private">
                    <span class="pull-right scope">
                      Private
                      
                    </span>
                    <h4>_isPaused</h4>
                    <dl>
                      <dt>Type</dt>
                      <dd>boolean</dd>
                      <dt>Private</dt>
                    </dl>
                    <div class="description"><p>Indicates whether or not the queue is paused; i.e., is not consuming and
executing additional jobs.</p>
</div>
                    <button class="btn btn-small show-code">Show code</button>
                    <pre class="language-javascript"><code class="language-javascript">    AsyncQueue.prototype._isPaused = false;</code></pre>
                  </div>
                  <div class="member private">
                    <span class="pull-right scope">
                      Private
                      
                    </span>
                    <h4>_pending</h4>
                    <dl>
                      <dt>Type</dt>
                      <dd>{fn: Array.&lt;function(): Promise&gt;, deferred: Deferred}</dd>
                      <dt>Private</dt>
                    </dl>
                    <div class="description"><p>A list of pending jobs.</p>
</div>
                    <button class="btn btn-small show-code">Show code</button>
                    <pre class="language-javascript"><code class="language-javascript">    AsyncQueue.prototype._pending = null;</code></pre>
                  </div>
                  
                </section>
      
                <section class="methods">
                  <h3>Methods 
                    <label class="checkbox">
                      <input class="toggle-public" type="checkbox"> Show Private Members
                    </label>
                  </h3>
                  
                  <div class="member private">
                    <span class="pull-right scope">
                      Private
                      
                    </span>
                    <h4>_processNext</h4>
                    <div class="description"><p>Execute the next job in the queue, if any.</p>
</div>
                    <dl>
                    </dl>
                    <dl>
                    </dl>
                    <button class="btn btn-small show-code">Show code</button>
                    <pre class="language-javascript"><code class="language-javascript">    AsyncQueue.prototype._processNext = function () {
        if (this._pending.length === 0) {
            return;
        }
        
        var job = this._pending.shift(),
            fn = job.fn,
            deferred = job.deferred;

        this._current = fn()
            .fail(function (err) {
                this.emit(&quot;error&quot;, err);
            }.bind(this))
            .finally(function () {
                deferred.resolve();
                this._current = null;

                if (!this._isPaused) {
                    this._processNext();
                }
            }.bind(this))
            .done();
    };</code></pre>
                  </div>
                  <div class="member">
                    <span class="pull-right scope">
                      
                      
                    </span>
                    <h4>pause</h4>
                    <div class="description"><p>Pause the queue, returning a promise that resolves when the queue has
quiesced. If there is no currently executing job, the promise is returned
as resolved. Otherwise, it resolves when the currently executing job is
complete.</p>
</div>
                    <dl>
                    </dl>
                    <dl>
                      <dt>Returns: </dt>
                      <dd class="label label-info pull-left">Promise</dd>
                      <dd></dd>
                    </dl>
                    <button class="btn btn-small show-code">Show code</button>
                    <pre class="language-javascript"><code class="language-javascript">    AsyncQueue.prototype.pause = function () {
        this._isPaused = true;

        if (this._current) {
            return this._current;
        } else {
            return new Q();
        }
    };</code></pre>
                  </div>
                  <div class="member">
                    <span class="pull-right scope">
                      
                      
                    </span>
                    <h4>push</h4>
                    <div class="description"><p>Add a new asynchronous operation to the queue.</p>
</div>
                    <dl>
                      <dt>fn</dt>
                      <dd class="label label-info pull-left">function(): Promise</dd>
                      <dd></dd>
                    </dl>
                    <dl>
                    </dl>
                    <button class="btn btn-small show-code">Show code</button>
                    <pre class="language-javascript"><code class="language-javascript">    AsyncQueue.prototype.push = function (fn) {
        var deferred = Q.defer(),
            job = {
                fn: fn,
                deferred: deferred
            };

        this._pending.push(job);

        if (!this._current &amp;&amp; this._pending.length === 1 &amp;&amp; !this._isPaused) {
            this._processNext();
        }

        return deferred.promise;
    };</code></pre>
                  </div>
                  <div class="member">
                    <span class="pull-right scope">
                      
                      
                    </span>
                    <h4>removeAll</h4>
                    <div class="description"><p>Remove all operations from the queue. Does not affect the currently executing operaiton.</p>
</div>
                    <dl>
                    </dl>
                    <dl>
                    </dl>
                    <button class="btn btn-small show-code">Show code</button>
                    <pre class="language-javascript"><code class="language-javascript">    AsyncQueue.prototype.removeAll = function () {
        this._pending.forEach(function (job) {
            job.deferred.reject();
        });

        this._pending.length = 0;
    };</code></pre>
                  </div>
                  <div class="member">
                    <span class="pull-right scope">
                      
                      
                    </span>
                    <h4>unpause</h4>
                    <div class="description"><p>Unpause the queue, continuing to process the existing jobs.</p>
</div>
                    <dl>
                    </dl>
                    <dl>
                    </dl>
                    <button class="btn btn-small show-code">Show code</button>
                    <pre class="language-javascript"><code class="language-javascript">    AsyncQueue.prototype.unpause = function () {
        this._isPaused = false;

        if (!this._current) {
            this._processNext();
        }
    };

    module.exports = AsyncQueue;
}());</code></pre>
                  </div>
                </section>
                
              </div>
            
          </section>
          
        </div>
      </div>
    </div>

    <script type="text/javascript" src="../../assets/js/prism.js"></script>
  </body>
</html>